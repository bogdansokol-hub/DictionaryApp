workflows:
  ios-release:
    name: Build iOS .NET MAUI App
    environment:
      vars:
        DOTNET_SKIP_FIRST_TIME_EXPERIENCE: "true"
      xcode: latest

    scripts:
      - name: Restore NuGet packages
        script: dotnet restore DictionaryApp/DictionaryApp.csproj

      - name: Build and archive IPA
        script: |
          dotnet publish DictionaryApp/DictionaryApp.csproj \
            -c Release -f net9.0-ios \
            /p:ArchiveOnBuild=true \
            /p:BuildIpa=true

    artifacts:
      - "DictionaryApp/bin/Release/net9.0-ios/ios-arm64/publish/*.ipa"
